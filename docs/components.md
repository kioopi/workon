| #  | Element                                                | Purpose                                                                                                           | Off-the-shelf tool(s)                                                                        | Notes / install hint                                      |
| -- | ------------------------------------------------------ | ----------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------- | --------------------------------------------------------- |
| 1  | **`/usr/local/bin/workon`** (shell wrapper)            | CLI entry-point (`start` = default, `stop`, `--layout`, `--dry-run`). Delegates everything heavy to helper tools. | Bash ‚â•4                                                                                      | 100‚Äì150 LOC is enough.                                    |
| 2  | **Project manifest** ‚Äì `workon.yaml` (per-repo)        | Lists **resources**, **layouts**, `default_layout` just like your example.                                        | Any editor üòä                                                                                | Committed to VCS; sits at repo root.                      |
| 3  | **Project env file** ‚Äì `.env` (optional)               | Supplies `{{VAR}}` values.                                                                                        | *direnv* **or** `dotenv` shell snippet                                                       | `direnv` lets vars appear automatically when you `cd`.    |
| 4  | **YAML ‚Üí JSON parser**                                 | Converts `workon.yaml` to JSON so Bash can query it.                                                              | [`yq`](https://github.com/mikefarah/yq) (`yq eval -o=json`)                                  | Debian/Ubuntu: `apt install yq`; Arch: `pacman -S yq-go`. |
| 5  | **JSON processor**                                     | Extract resources/layout rows, update session files.                                                              | `jq`                                                                                         | Virtually everywhere in repos.                            |
| 6  | **Template expander**                                  | Replaces `{{VAR}}` in resource commands/URLs with env values.                                                     | `envsubst` (gettext) or a 5-line Bash function                                               | Keep it simple: only `{{IDENT}}`.                         |
| 7  | **Launcher shim**                                      | Opens files / desktop IDs while respecting `Terminal=true`.                                                       | Your finished **`pls-open`**                                                            | Lives in `$PATH`.                                         |
| 8  | **Window spawner**                                     | Ask AwesomeWM to run commands on a specific tag.                                                                  | `awesome-client` (`awesome-client '<lua>'`)                                                  | Provided by AwesomeWM package.                            |
| 9  | **Session-file store** ‚Äì `~/.cache/workon/<sha1>.json` | Records `{cmd,pid,tag}` for each resource so `workon stop` can kill them.                                         | `jq` for appending, plain shell redirection                                                  | One file per active session.                              |
| 10 | **PID capture inside Awesome**                         | Gets the real client PID after spawn (robust vs forking apps).                                                    | Lua callback: `awful.spawn.easy_async_with_shell` **or** `awful.spawn(‚Ä¶, function(c) ‚Ä¶ end)` | The callback‚Äôs `c.pid` is what you store.                 |
| 11 | **Stop-command killer**                                | Reads session JSON, `kill $pid` if still alive; otherwise Lua loop to `c:kill()` clients left over.               | Bash + `jq` + `awesome-client`                                                               | Lua one-liner iterates `client.get()`.                    |
| 12 | **Config dir** ‚Äì `~/.config/workon/`                   | Global defaults (fallback layout, default terminal, etc.).                                                        | none                                                                                         | Keeps `workon.conf`, templates.                           |
| 13 | **Cache dir** ‚Äì `~/.cache/workon/`                     | Holds session files.                                                                                              | none                                                                                         | mkdir -p if missing.                                      |
| 14 | **Utilities (optional)**                               | `git rev-parse --show-toplevel` to detect repo root; `realpath` for sturdy paths.                                 | git coreutils                                                                                | Makes ‚Äúrun inside repo‚Äù magic.                            |

