| Phase                                                    | Deliverable (version tag)                                                                                                                                                                                                       | Tasks (in order)                                                                                                                                                                                                                 | External tools needed now    |
| -------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------- |
| **0. Bootstrap**                                         | *repo scaffold*                                                                                                                                                                                                                 | 1. Create Git repo, `bin/`, `README.md`. <br>2. Add `pls-open` to `$PATH` (or vendor a copy). <br>3. Add `.editorconfig`, shell‐lint CI (optional).                                                                         | git, shellcheck              |
| **1. MVP start-only** (`v0.1-alpha`)                     | `workon start …` opens **all resources** on the *current* tag (no layouts yet).                                                                                                                                                 | 1. Locate `workon.yaml` by walking up.  <br>2. Parse with `yq -o=json`, loop resources in definition order. <br>3. `envsubst` → expand `{{VAR}}`. <br>4. Spawn each line via **`pls-open`** (or plain `xdg-open` for URLs). | yq, envsubst, awesome-client |
| **2. Session file & stop** (`v0.1`) ← **Minimal usable** | 1. After each spawn, append `{cmd,pid}` JSON object to `~/.cache/workon/<hash>.json`.  <br>2. Implement `workon stop` that reads theJSON, sends `SIGTERM`, then `SIGKILL` after 5 s if still live.  <br>3. Delete session file. | jq                                                                                                                                                                                                                               |                              |
| **3. Default layout** (`v0.2`)                           | Basic tiling on tags 1…N.                                                                                                                                                                                                       | 1. Read `default_layout` array. <br>2. While looping rows, keep `tag_idx` counter and spawn with `awesome-client 'awful.spawn(\"…\", {tag=TAG})'`.                                                                               | awesome-client               |
| **4. Multiple layouts flag** (`v0.3`)                    | `workon --layout <name>` chooses another set.                                                                                                                                                                                   | 1. Add CLI flag parsing. <br>2. Validate layout exists; fall back to default.                                                                                                                                                    |                              |
| **5. Environment sources** (`v0.4`)                      | Seamless variable resolution.                                                                                                                                                                                                   | 1. If **direnv** present and `.envrc`/`.env` exists, load via `direnv exec`. <br>2. Otherwise \`export \$(grep -v '^#' .env                                                                                                      | xargs)\`.                    |
| **6. Robust PID capture** (`v0.5`)                       | Survives forking apps.                                                                                                                                                                                                          | Replace `awesome-client 'awful.spawn(...)'` with Lua that stores `c.pid` from the **client callback**, not the stub PID, into session file (via `echo` pipe).                                                                    |                              |
| **7. Window-fallback stop** (`v0.6`)                     | Kills leftovers even when PID died.                                                                                                                                                                                             | In `stop`, if `kill -0` fails, run Lua loop:  \n`for _,c in ipairs(client.get()) do if c.name:find(pattern) then c:kill() end end`                                                                                               |                              |
| **8. Safety & QoL** (`v0.7`)                             | • `--dry-run` <br>• `--unique` aborts if live session exists <br>• Warn on stale cache older than N days.                                                                                                                       | Extend shell wrapper with simple tests.                                                                                                                                                                                          |                              |
| **9. Per-resource flags** (`v0.8`)                       | YAML `persist: true`, `tag: 5`, etc.                                                                                                                                                                                            | Enhance parser; respect flags both at start and stop.                                                                                                                                                                            |                              |
| **10. Multi-monitor / named-tags** (`v1.0`)              | `screen:tag` syntax or tag names                                                                                                                                                                                                | Translate names via Awesome’s Lua (`awful.tag.find_by_name`).                                                                                                                                                                    |                              |
| **11. Packaging & docs** (`v1.0-release`)                | Debian pkg / Homebrew tap, man page.                                                                                                                                                                                            | fpm or `dpkg-buildpackage`, GitHub Actions.                                                                                                                                                                                      |                              |

